parameters:
    environment: ''
    artifactName: ''
    serviceConnection: ''
    apiAppName: ''

pool: 
    vmImage: 'ubuntu-latest'
jobs:
- deployment : '${{ parameters.apiAppName }}'
  environment: '${{ parameters.environment }}'
  strategy:
        runOnce:
         deploy:
           steps:
           - task: DownloadBuildArtifacts@0
             inputs:
               buildType: 'current'
               downloadType: 'single'
               artifactName: '${{ parameters.artifactName }}'
               downloadPath: '$(System.ArtifactsDirectory)'

           - task: AzureWebApp@1
           inputs:
            azureSubscription: '${{ parameters.serviceConnection }}'
            appType: 'apiApp'
            appName: '${{ parameters.apiAppName }}'
            package: '$(System.ArtifactsDirectory)/**/*.zip'
            deploymentMethod: 'auto's
           displayName: 'DÃ©ploiement de application'